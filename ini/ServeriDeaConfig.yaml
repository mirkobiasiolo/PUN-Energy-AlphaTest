# ==== Serial / Modbus ====
serial_port: "/dev/ttyUSB0"
slave_id: 1
baudrate: 9600
serial_timeout_ms: 500
parity: "NONE"             # valuta "EVEN" (8E1) se il tuo device Ã¨ Modbus classico
stopbits: 1
handle_local_echo: 0
inter_byte_timeout_ms: 10
read_functioncode: 3
address_correction: 1      # YAML = Form1

# Rispetto tempi RTU
rtu_gap_ms: 5

# ==== Avvio ====
autorun: 1
startup_warmup_ms: 700
startup_dummy_reads: 3

# ==== Letture ====
read_blocks: [1001,1002,1003,1004,1005,
              1010,1011,1012,1013,
              1020,1021,1022,1023,
              1030,1032,1034,1036,
              1040,1041,1042,
              1060,1062,1063,1064,1065,1066,
              1070,1072,1074,
              1080,
              1090]
max_retry: 4
retry_backoff_ms: 80
poll_ms: 500
poll_jitter_ms: 20
from_include_meta: true
bus_log_cooldown_s: 5

# Lettura adattiva
read_max_chunk: 4
read_min_chunk: 1
error_reopen_threshold: 3
reopen_cooldown_s: 10
flush_on_error: true

# ==== Writer (ToiDea -> Modbus, IMMEDIATO, nessuna coda) ====
writer_sleep_ms: 100       # ogni quanto il watcher controlla ToiDea.xml
write_retries: 3
verify_writes: 1
writer_commit_register: 0
writer_commit_value: 1

# ==== Rilevazione foreign-master (diagnostica) ====
foreign_window_s: 10
foreign_threshold: 3

# ==== XML / CSV ====
xml_retry: 10
xml_retry_backoff_ms: 60
xml_ignore_errors: true    # consigliato true su Windows se apri spesso FromiDea.xml
csv_enable: true
log_rollover_bytes: 5000000
log_rollover_hourly: false

